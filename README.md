# 10-pjt
# 1. 팀원 정보 및 업무 분담 내역
- 유지인
    - 주요 업무 : 프론트엔드 및 CSS
    - 서브 업무 : 백엔드
- 이가람
    - 주요 업무 : 백엔드
    - 서브 업무 : 프론트 엔드 및 CSS

# 2. 목표 서비스 구현 및 실제 구현 정도
- sns와 블로그 처럼 자신의 페이지에 일기를 쓰고 이웃 목록을 보여주고 방문자 수도 나타내어 자신만의 페이지를 보여주는 것이 저희의 큰 틀이었습니다. 
- drf와 vue를 연동시킨 프로젝트
- 주 메인 서비스는 OPEN AI API를 통해 프롬프트 엔지니어링을 하고 그것을 통해 일기를 분석하고 사용자의 감정을 분석해 그 날의 감정에 맞는 영화를 추천해주는 서비스입니다. 저희가 목표로 했던 일기 분석 -> 감정 추출 -> 감정에 따라 영화 2개 추출의 과정은 저희가 만든 프롬프트를 통해 실제 구현을 했습니다. 이 AI를 drf와 vue와 연동시켜 실제 홈페이지 화면의 띄우는 것도 구현하였습니다.  


# 3. 데이터베이스 모델링 (ERD) : 
![alt text](돌담뮤비니티.png)

# 4. 영화 추천 알고리즘에 대한 기술적 설명:
**돌담뮤비디아의 영화 추천 시스템 기술적 설명**

#### 돌담뮤비디아는 사용자가 작성한 일기를 분석하여 감정에 맞는 영화를 추천하는 시스템을 제공합니다. 이 영화 추천 기능은 OpenAI API를 활용하여 자연어 처리(NLP)를 수행하며, 사용자의 감정 상태에 맞춰 두 가지 영화를 추천합니다: 하나는 감정을 반영하는 영화, 다른 하나는 사용자의 감정과 반대되는 영화입니다. 이러한 접근 방식은 사용자가 자신의 감정 상태를 더 깊이 이해하고 그에 따라 감정적 위안을 얻거나 기분 전환을 할 수 있는 기회를 제공합니다.

### 1. 데이터 준비 및 감정 분석
- **JSON 파일을 통해 영화 데이터 준비**: 시스템은 `updated_movies.json` 파일에서 영화 목록을 로드합니다. 이 과정에서 영화 제목을 정리하여 불필요한 특수문자를 제거합니다.
- **일기 텍스트 입력**: 사용자가 작성한 일기 내용을 `gpt_recommend()` 함수에 전달하여 감정 분석을 수행합니다.
- **감정 분류 및 추천 로직**: OpenAI API를 사용하여 일기의 감정을 분석합니다. 감정 분석 결과는 기쁨, 슬픔, 분노, 우울, 차분, 흥분의 6가지로 분류되며, 각각의 감정에 맞는 영화 장르가 정의되어 있습니다. API는 일기의 감정을 감지하고 그 감정에 적합한 영화 장르에서 추천 영화를 선택합니다.

### 2. 영화 추천 생성
- **프롬프트 구성 및 OpenAI 호출**: 사용자의 감정 상태를 기반으로 하는 영화 추천을 위해 OpenAI API와의 대화형 채팅 모델을 호출합니다. API 요청은 GPT 모델에 감정 분석 및 영화 추천을 위한 프롬프트를 전달하여 이루어집니다. 모델은 추천 영화 두 편을 제공하며, 감정 상태와 조화를 이루는 영화와 반대되는 영화 각 한 편씩을 추천합니다.
- **추천 응답 처리**: 모델에서 반환된 응답은 감정 분석 결과, 추천 영화 제목, 추천 이유, 그리고 일기에 대한 리뷰를 포함합니다. 이 데이터는 JSON 형식으로 정리되어 데이터베이스에 저장됩니다.

### 3. 다이어리 작성 및 영화 추천 저장
- **다이어리 저장 로직**: 사용자가 새로운 일기를 작성하고 저장하면, 시스템은 일기의 감정 분석 결과와 추천 영화 정보를 `Diary` 모델에 저장합니다. 영화 제목을 기반으로 데이터베이스에서 실제 영화 객체를 가져와 추천 영화 목록을 다이어리 객체에 추가합니다. 또한, 추천 이유와 GPT의 코멘트를 함께 저장하여 사용자가 일기를 돌아보며 감정적 공감을 느낄 수 있도록 합니다.
- **영화 추천 결과 저장**: 감정 분석에 따라 추천된 영화는 다이어리 모델의 `recommend_movie` 필드에 추가되고, 추천 이유는 딕셔너리 형태로 `recommend_reasons`에 저장됩니다. 이 모든 정보는 사용자에게 JSON 형태로 반환되어 프론트엔드에서 사용됩니다.

### 4. 에러 처리 및 트랜잭션 관리
- **API 호출 및 데이터베이스 저장 시 에러 처리**: OpenAI API 호출 중 발생할 수 있는 오류와 JSON 파일 파싱 시 발생하는 오류를 각각 예외 처리하여 시스템의 안정성을 높였습니다. 또한, 데이터베이스 작업은 트랜잭션을 통해 관리되며, 문제가 발생할 경우 롤백하여 데이터의 무결성을 보장합니다.

이와 같은 영화 추천 로직은 사용자의 감정을 존중하고 공감할 수 있는 추천을 목표로 하고 있습니다. 이 시스템은 단순히 영화를 추천하는 것이 아니라, 사용자와의 감정적 연결을 중요시하며 사용자 개개인에게 맞춤형 경험을 제공합니다.



# 5. 핵심 기능에 대한 설명

# 6. 생성형 AI를 활용한 부분

# 7. 느낀점(어려웠던 점, 후기 등등)